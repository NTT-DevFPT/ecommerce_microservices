"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7358,7601],{78816:(e,t,r)=>{r.d(t,{b:()=>a});var n=r(67294);function a(){return n.createElement("svg",{width:"44px",height:"49px",viewBox:"0 0 44 49",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.createElement("defs",null,n.createElement("filter",{x:"-39.8%",y:"-36.1%",width:"179.5%",height:"172.1%",filterUnits:"objectBoundingBox",id:"filter-1"},n.createElement("feOffset",{dx:"0",dy:"3",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.createElement("feGaussianBlur",{stdDeviation:"3",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.0980392157   0 0 0 0 0.0980392157   0 0 0 0 0.0980392157  0 0 0 0.24 0",type:"matrix",in:"shadowBlurOuter1",result:"shadowMatrixOuter1"}),n.createElement("feMerge",null,n.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),n.createElement("feMergeNode",{in:"SourceGraphic"})))),n.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"线下店-首页",transform:"translate(-1752.000000, -1151.000000)"},n.createElement("g",{id:"编组-9",transform:"translate(1752.000674, 1151.000000)"},n.createElement("path",{d:"M22.4587582,0.000773661833 C22.7850958,0.0019069457 23.1057042,0.00465611588 23.4207677,0.0091371713 L23.4207677,0.0091371713 L24.3495077,0.0278919922 L25.2460836,0.0577341181 L26.1116011,0.0993595426 C32.0640978,0.433603044 35.8150478,1.68507452 39.0708007,4.92804004 C41.8336873,7.68164205 43.1409349,10.72156 43.6784191,15.236563 L43.6784191,15.236563 L43.7589397,15.9818433 C43.7959346,16.3611362 43.8281127,16.7505489 43.8558396,17.1507151 L43.8558396,17.1507151 L43.9054668,17.9655733 L43.943874,18.8102341 L43.9717113,19.6858239 L43.9896286,20.5934694 C43.9918242,20.7474775 43.9936336,20.9028682 43.9950703,21.0596649 L43.9950703,21.0596649 L43.9993262,22.0175059 L43.9896785,23.4407601 L43.9718501,24.3478291 C43.9680737,24.4963013 43.9638859,24.6434364 43.9592731,24.7892578 L43.9592731,24.7892578 L43.9263875,25.6486115 L43.8826514,26.4775698 C43.8661921,26.7489491 43.847816,27.0154512 43.8274149,27.2772647 L43.8274149,27.2772647 L43.7600281,28.048828 C43.2811165,32.9750144 41.9909863,36.1900981 39.0864415,39.0928917 C36.3312922,41.8462652 33.2964806,43.1468443 28.7823645,43.6811691 L28.7823645,43.6811691 L28.0371894,43.7612082 C27.5315087,43.8102344 27.007781,43.8507388 26.4644906,43.883589 L26.703,43.867 L22.7364804,48.1958318 C22.363288,48.6029508 21.7307206,48.6304538 21.3236016,48.2572614 C21.3022449,48.2376844 21.2817491,48.2171885 21.2621721,48.1958318 L17.2935985,43.8684659 C16.8358205,43.8385405 16.3920694,43.8029707 15.961409,43.7612207 L15.961409,43.7612207 L15.2162352,43.6811875 C10.7021355,43.1469036 7.66749459,41.8464567 4.91282902,39.0935092 C2.00755869,36.1913793 0.717436023,32.9768965 0.238580919,28.0476639 L0.238580919,28.0476639 L0.171203022,27.2756027 C0.150804957,27.0136134 0.132431989,26.7469253 0.115975703,26.4753495 L0.115975703,26.4753495 L0.0722484766,25.6457695 C0.0658828083,25.5049993 0.0599692069,25.3629598 0.0544941206,25.2196274 L0.0544941206,25.2196274 L0.0267973686,24.3439295 L0.00897449081,23.4360678 L0,22.4949075 L0,21.5702513 L0.00792999927,20.5999183 L0.026046721,19.6640349 C0.205831707,12.6179833 1.34726114,8.50565856 4.91118196,4.94470236 C7.72186563,2.13658996 10.8609238,0.821199076 15.5142441,0.295982921 L15.5142441,0.295982921 L16.2822972,0.217628069 C16.9337147,0.157919341 17.6139554,0.111946902 18.325946,0.0779770287 L18.325946,0.0779770287 L19.1957619,0.0428634533 L20.0971814,0.0186065902 L21.0313282,0.00454068918 C21.3482899,0.00147657694 21.6708935,0 21.9993262,0 L21.9993262,0 Z",id:"路径-3",fill:"#FFFFFF",fillRule:"nonzero"}),n.createElement("path",{d:"M22.4448673,4.00074954 C28.2103065,4.02077138 32.9353497,4.46244294 36.247138,7.76122353 C39.6500556,11.1527059 39.9993262,16.0410824 39.9993262,22.0175059 C39.9993262,27.9862353 39.6540086,32.8705176 36.2589262,36.2635529 C32.8636321,39.6566588 27.9741262,40 21.9993262,40 C16.024385,40 11.1349497,39.6566588 7.73972622,36.2635529 C4.34400857,32.8715059 3.99932622,27.9862353 3.99932622,22.0175059 L3.9999806,21.5827084 C4.01795416,15.8114077 4.42679652,11.0831868 7.73831445,7.77442353 C11.1333968,4.38244706 16.0238909,4 21.9993262,4 Z M20.5098881,20.3795812 L17.3994408,20.3795812 C17.2719248,20.3795812 17.1684387,20.481851 17.1684387,20.606936 L17.1684387,20.606936 L17.1684387,28.8447257 C17.1684387,28.9687242 17.2719248,29.0714286 17.3994408,29.0714286 L17.3994408,29.0714286 L20.5098881,29.0714286 C20.6354732,29.0714286 20.7384586,28.9687242 20.7384586,28.8447257 L20.7384586,28.8447257 L20.7384586,20.606936 C20.7384586,20.481851 20.6354732,20.3795812 20.5098881,20.3795812 L20.5098881,20.3795812 Z M19.8470479,14.9285714 L11.2991823,14.9285714 C11.172596,14.9285714 11.0707548,15.0306964 11.0707548,15.1563608 L11.0707548,15.1563608 L11.0707548,28.8447257 C11.0707548,28.9687242 11.172596,29.0714286 11.2991823,29.0714286 L11.2991823,29.0714286 L14.261874,29.0714286 C14.3885319,29.0714286 14.4930192,28.9687242 14.4930192,28.8447257 L14.4930192,28.8447257 L14.4930192,18.101543 C14.4930192,17.9775444 14.5952895,17.874333 14.7219473,17.874333 L14.7219473,17.874333 L20.0889922,17.874333 C21.1440212,17.9008421 22.1582135,18.0275205 22.702177,18.5800092 C23.3346795,19.2210063 23.4046953,20.4963368 23.4078421,21.7373361 L23.4078421,21.7373361 L23.4078421,28.8447257 C23.4078421,28.9687242 23.5113281,29.0714286 23.6383436,29.0714286 L23.6383436,29.0714286 L26.5991043,29.0714286 C26.725047,29.0714286 26.8285331,28.9687242 26.8285331,28.8447257 L26.8285331,28.8447257 L26.8279254,21.7153452 C26.8180806,19.5391909 26.676847,17.3240232 25.5682484,16.1997011 C24.416456,15.0317104 22.0810459,14.9285714 19.8470479,14.9285714 L19.8470479,14.9285714 Z M32.6978252,14.9285714 L29.7355626,14.9285714 C29.6089763,14.9285714 29.5061339,15.0306964 29.5061339,15.1563608 L29.5061339,15.1563608 L29.5061339,28.8447257 C29.5061339,28.9687242 29.6089763,29.0714286 29.7355626,29.0714286 L29.7355626,29.0714286 L32.6978252,29.0714286 C32.8233388,29.0714286 32.9278976,28.9687242 32.9278976,28.8447257 L32.9278976,28.8447257 L32.9278976,15.1563608 C32.9278976,15.0306964 32.8233388,14.9285714 32.6978252,14.9285714 L32.6978252,14.9285714 Z",id:"logo",fill:"#FF6900"})))))}},87358:(e,t,r)=>{r.d(t,{A:()=>ue});var n=r(67294),a=r(94184),o=r(30833);function c(e){var t=e.serviceInfoList,r=void 0===t?[]:t;return n.createElement("ul",{className:"service-list"},r.map((function(e,t){return n.createElement("li",{className:"service-list__item",key:t},n.createElement("img",{className:"service-list__icon",src:e.icon,alt:e.info}),n.createElement("span",{className:"service-list__desc"},e.info))})))}var l=r(44006);function i(){var e=(0,n.useContext)(l.j),t=e.data,r=t.title,a=t.serviceInfoList;return(0,n.useEffect)((function(){return e.getService(),function(){e.resetService()}}),[]),n.createElement("section",{className:"head-content"},"success"===e.ajaxStatus?n.createElement(n.Fragment,null,n.createElement("h1",{className:"head-content__title"},r),n.createElement(c,{serviceInfoList:a})):n.createElement(o.a,{extClassNames:"head-content__loader"}))}var s,u=r(56024),m=r(28396),f=r(7651),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},p=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c};!function(e){e.UPDATE_SEARCH_WORD="UPDATE_SEARCH_WORD",e.UPDATE_FILTER_DATA="UPDATE_FILTER_DATA",e.UPDATE_POSITION="UPDATE_POSITION",e.UPDATE_ACTIVE_ITEM="UPDATE_ACTIVE_ITEM",e.UPDATE_MAP_CENTER="UPDATE_MAP_CENTER",e.UPDATE_APP_CENTER="UPDATE_APP_CENTER",e.UPDATE_ACTIVE_TAB="UPDATE_ACTIVE_TAB",e.UPDATE_IS_HAS_ACTIVE="UPDATE_IS_HAS_ACTIVE"}(s||(s={}));var E={word:"",filterType:[],position:{lat:1e3,lng:1e3},activeItem:"",mapCenter:{lat:1e3,lng:1e3},wordChangeCount:0,isMarkerHasActive:!1,appCenter:{lat:1e3,lng:1e3},activeTab:"list"};function v(e,t){switch(t.type){case s.UPDATE_POSITION:return d(d({},e),{position:t.payload});case s.UPDATE_FILTER_DATA:return d(d({},e),{filterType:t.payload});case s.UPDATE_SEARCH_WORD:return d(d({},e),{word:t.payload,wordChangeCount:e.wordChangeCount+1});case s.UPDATE_ACTIVE_ITEM:return t.payload?d(d({},e),{activeItem:t.payload,isMarkerHasActive:!0}):d(d({},e),{activeItem:t.payload});case s.UPDATE_MAP_CENTER:return d(d({},e),{mapCenter:t.payload});case s.UPDATE_APP_CENTER:return d(d({},e),{appCenter:t.payload});case s.UPDATE_ACTIVE_TAB:return d(d({},e),{activeTab:t.payload});case s.UPDATE_IS_HAS_ACTIVE:return d(d({},e),{isMarkerHasActive:t.payload});default:return e}}var y=(0,n.createContext)({state:E,dispatch:function(e){}});function g(e){var t=p((0,n.useReducer)(v,E),2),r=t[0],a=t[1];return n.createElement(y.Provider,{value:{state:r,dispatch:a}},e.children)}var _=r(1796),h=r(86690),C=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c},b=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};function T(e){var t=C((0,n.useState)([]),2),r=t[0],a=t[1],o=e.isFilterActive,c=void 0!==o&&o,l=e.setIsFilterActive,i=e.storeFilterData,u=(0,n.useContext)(y),d=u.state.filterType,p=u.dispatch,E=(0,_.YB)(),v=Object.entries(i||{}),g=function(e){var t=e.target.value;r.includes(t)?a(r.filter((function(e){return e!==t}))):a(b(b([],C(r),!1),[t],!1))};return(0,n.useEffect)((function(){p({type:s.UPDATE_FILTER_DATA,payload:Object.keys(i)}),a(Object.keys(i))}),[i]),c?n.createElement("div",{className:"store-filter store-filter-m"},n.createElement("div",{className:"store-filter__main"},n.createElement("div",{className:"store-filter__checkbox"},v.map((function(e){var t=C(e,2),a=t[0],o=t[1];return n.createElement(m.Z,{value:a,key:a,checked:r.includes(a),className:"store-filter__radio-item",cbType:"default",onChange:g},o)}))),n.createElement(f.z,{btnType:"primary",className:"store-filter__confirm",onClick:function(){p({type:s.UPDATE_FILTER_DATA,payload:r}),l&&l(!1),(0,h.otClick)({tip:{a:16,b:107,c:"xiaomistore_type",d:0,e:17769},isOpenGA:!0,elementTitle:"confirm",elementName:r.map((function(e){return i[e]})).join("+")})}},E.get("70d9be9b139893aa6c69b5e77e614311"))),n.createElement("div",{className:"store-filter__mask",onClick:function(){a(d),l&&l(!1)},role:"button",tabIndex:0})):n.createElement(n.Fragment,null)}var A=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c},N=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};function L(e){var t=e.storeFilterData,r=(0,n.useContext)(y),a=r.state.filterType,o=r.dispatch,c=Object.entries(t||{});return(0,n.useEffect)((function(){o({type:s.UPDATE_FILTER_DATA,payload:Object.keys(t)})}),[t]),n.createElement("div",{className:"store-filter store-filter-pc"},c.map((function(e){var r=A(e,2),c=r[0],l=r[1];return n.createElement(m.Z,{value:c,key:c,checked:a.includes(c),className:"store-filter__radio-item",cbType:"card",onChange:function(e){return function(e,r){var n=e.target.value,c=a.includes(e.target.value)?a.filter((function(e){return e!==n})):N(N([],A(a),!1),[n],!1);(0,h.otClick)({tip:{c:"xiaomistore_type",d:0,e:17769},isOpenGA:!0,elementTitle:r,elementName:c.map((function(e){return t[e]})).join("+")}),o({type:s.UPDATE_FILTER_DATA,payload:c})}(e,l)}},l)})))}var I=function(){return I=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},I.apply(this,arguments)};function x(e){return"mobile"!==(0,u.ag)()?n.createElement(L,I({},e)):n.createElement(T,I({},e))}function S(e){var t=(0,_.YB)(),r=e.updateTab,o=(0,n.useContext)(y).state.activeTab,c=function(e){r(e),(0,h.otClick)({tip:{c:"map_listing",d:0,e:17769},isOpenGA:!0,elementTitle:"list"===e?t.get("56ee3495a32081ccb6d2376eab391bfa"):t.get("46f3ea056caa3126b91f3f70beea068c"),elementName:"list"===e?t.get("56ee3495a32081ccb6d2376eab391bfa"):t.get("46f3ea056caa3126b91f3f70beea068c")})};return n.createElement("div",{className:"toggle-tab"},n.createElement("div",{className:"toggle-tab__container"},n.createElement("span",{className:a("toggle-tab__item",{active:"list"===o}),onClick:function(){return c("list")},role:"button",tabIndex:0},t.get("56ee3495a32081ccb6d2376eab391bfa")),n.createElement("i",{className:"line"}),n.createElement("span",{className:a("toggle-tab__item",{active:"map"===o}),onClick:function(){return c("map")},role:"button",tabIndex:0},t.get("46f3ea056caa3126b91f3f70beea068c"))))}var k=r(39784),w=r(81071),D=r(6658);function P(){var e=(0,n.useContext)(D.N),t=(0,n.useContext)(w.n),r=(0,n.useContext)(y).state.word,a=e.data.storeList,o=t.data,c=o.searchResult.storeList,l=o.recommendData.storeRecommend;return{resultData:(0,n.useMemo)((function(){return r?c.length?c:l||[]:a}),[r,a,c,l]),resultType:c.length?1:2}}function U(e){var t=e.storeTypeInfo,r=(0,u.ag)(),c=(0,_.YB)(),l=P(),i=l.resultData,m=void 0===i?[]:i,d=l.resultType,p=(0,n.useContext)(y),E=p.state,v=E.filterType,g=E.activeItem,C=E.word,b=E.wordChangeCount,T=p.dispatch,A=(0,n.useContext)(w.n),N=(0,n.useContext)(D.N),L=(0,n.useCallback)((function(e){"mobile"!==r&&T({type:s.UPDATE_ACTIVE_ITEM,payload:e})}),[g]),I=(0,n.useMemo)((function(){return m.filter((function(e){return v.includes(e.storeType)}))}),[m,v]);return n.createElement("div",{className:"mi-store-list"},"success"===A.ajaxStatus||0===b&&N.getServiceSuccess?n.createElement(n.Fragment,null,2===d&&""!==C&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mi-store-list-empty"},n.createElement("i",{className:"micon micon-warning"}),n.createElement("p",{className:"mi-store-list-empty__content"},c.get("acea81a316556b9fd4ad5e0dc3cc9b55"))),n.createElement("p",{className:"mi-store-list-empty__tip"},c.get("da7ca443be6d85cb6940cb047c11e966"))),n.createElement("ul",{className:"mi-store-list__container",role:"menu",tabIndex:0},I.map((function(e,o){var l=e.id,i=e.name,s=e.link,u=e.address,m=e.weekend,d=e.storeType,p=e.mobileArr,E=t[d]||"";return n.createElement("li",{className:a("mi-store-list__item",{active:l===g&&"mobile"!==r}),key:"".concat(o,"-").concat(l),role:"menuitem",tabIndex:0,onClick:function(){return L(l)}},n.createElement("h3",{className:"mi-store-list__item-title"},i),u&&n.createElement("p",{className:"mi-store-list__item-location"},n.createElement("i",{className:"micon micon-location"}),n.createElement("span",null,u)),m&&n.createElement("p",{className:"mi-store-list__item-time"},n.createElement("i",{className:"micon micon-time"}),n.createElement("span",null,m)),!!p.length&&n.createElement("p",{className:"mi-store-list__item-phone"},n.createElement("i",{className:"micon micon-phone"}),n.createElement("span",null,p.join(", "))),E&&n.createElement(k.V,{className:"mi-store-list__item-tag",color:"orange"},E),n.createElement(f.z,{className:"mi-store-list__item-link",onClick:function(e){return function(e,t){return e.stopPropagation(),(0,h.otClick)({tip:{c:"xiaomistore_storelist",d:0,e:17769},isOpenGA:!0,elementTitle:c.get("d3da97e2d9aee5c8fbe03156ad051c99"),elementName:"more",linkUrl:t}),t&&window.location.assign(t)}(e,s)},href:s,btnType:"link",withArrow:"enable"},c.get("d3da97e2d9aee5c8fbe03156ad051c99")))})))):n.createElement(o.a,{extClassNames:"mi-store-list__loader"}))}var O=r(98986),M=function(e){var t=e||{lat:1e3,lng:1e3},r=t.lat,n=t.lng;return 1e3!==r&&1e3!==n},F=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c};var R=r(62711),V=r(78816);function j(e){var t=e.storeData,r=t.id,o=t.name,c=t.image,i=t.address,m=t.weekend,d=t.link,p=t.storeType,E=e.activeItem,v=e.setActiveItem,g=e.handleMakerClick,C=(0,n.useContext)(y).dispatch,b=(0,n.useContext)(l.j).data.storeTypeInfo,T=(0,u.ag)(),A=(0,_.YB)(),N=(0,n.useMemo)((function(){return"mobile"===T}),[T]),L=(0,n.useMemo)((function(){return r===E}),[E,r]),I=(0,n.useMemo)((function(){return b[p]||""}),[b,p]),x=function(e){return(0,h.otClick)({tip:{c:"xiaomistore_card",d:0,e:17769},isOpenGA:!0,elementTitle:A.get("d3da97e2d9aee5c8fbe03156ad051c99"),elementName:"more",linkUrl:e}),e&&window.location.assign(e)};return n.createElement("div",{className:a("store-marker",{active:L})},n.createElement("div",{className:"store-marker__sign",onClick:function(e){L||(v(r),!N&&g&&g(e,r))},role:"button",tabIndex:0},n.createElement(V.b,null)),E===r&&n.createElement("div",{className:"store-marker__card"},"mobile"!==T&&"tablet"!==T?n.createElement(n.Fragment,null,n.createElement("img",{src:c,alt:o}),I&&n.createElement(k.V,{className:"store-marker__card--tag",color:"orange"},I),o&&n.createElement("h3",{className:"store-marker__card--title"},o),i&&n.createElement("p",{className:"store-marker__card--location"},n.createElement("i",{className:"micon micon-location"}),n.createElement("span",null,i)),m&&n.createElement("p",{className:"store-marker__card--time"},n.createElement("i",{className:"micon micon-time"}),n.createElement("span",null,m)),n.createElement(f.z,{className:"store-marker__card--btn",btnType:"primary",onClick:function(){return x(d)}},A.get("d3da97e2d9aee5c8fbe03156ad051c99")),n.createElement(R.q,{symbol:"dialog-close",className:"store-marker__clear",onClick:function(){C({type:s.UPDATE_ACTIVE_ITEM,payload:""})}})):n.createElement(n.Fragment,null,o&&n.createElement("h3",{className:"store-marker__card--title"},o),I&&n.createElement(k.V,{className:"store-marker__card--tag",color:"orange"},I),n.createElement(f.z,{className:"store-marker__card--btn",btnType:"link",onClick:function(){return x(d)}},A.get("d3da97e2d9aee5c8fbe03156ad051c99")," ",n.createElement(R.q,{symbol:"link-arrow"})),n.createElement("span",{className:"store-marker__tip"}))))}function W(e){return M({lat:e.lat,lng:e.lng})?n.createElement("div",{className:"center-maker"},n.createElement("div",{className:"center-maker__outer"},n.createElement("div",{className:"center-maker__inner"}))):n.createElement(n.Fragment,null)}var H=r(53573),B=r(85785),z=r(16723);function q(e,t){var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(r)for(;e;){if(r.call(e,t))return e;e=e.parentElement}return null}function G(e){var t=e.word,r=e.updateSearchWord,a=e.setSuggestShow,o=e.userInput,c=e.setUserInput,l=e.userRealInput,i=(0,n.useContext)(B.QF),s=(0,u.ag)(),m=(0,_.YB)(),f=(0,n.useRef)(null),d=(0,z.m)((function(e){return i.getObservable({params:{word:e,from:"mobile"===s?"mobile":"pc",type:2}})}),200),p=function(){var e;c(""),null===(e=f.current)||void 0===e||e.focus()},E=function(e){e.target&&(q(e.target,".store-search")||a(!1))};(0,n.useEffect)((function(){return c(t)}),[t]),(0,n.useEffect)((function(){return window.addEventListener("click",E,!1),function(){window.removeEventListener("click",E,!1)}}),[]);return n.createElement(H.I,{ref:f,fullwidth:!0,placeholder:m.get("d90ec336fd06c0eca448acaa1970e3d2"),value:o,onChange:function(e){var t=e.target.value;l.current=t,c(t),a(!!t),""!==t&&d(t)},onKeyPress:function(e){var t;"Enter"===e.key&&(r(o),null===(t=f.current)||void 0===t||t.blur())},onFocus:function(){d(o),a(!0)},prefix:n.createElement("i",{className:"micon micon-search-glass"}),suffix:o.length?n.createElement("i",{className:"micon micon-clear",onClick:p,role:"button",tabIndex:0}):null,className:"store-search-input"})}var Z=function(){return Z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Z.apply(this,arguments)},Y=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c};function K(){var e=Y(function(){var e=F((0,n.useState)({lat:1e3,lng:1e3}),2),t=e[0],r=e[1],a=(0,_.oW)(),o=P().resultData,c=(0,n.useContext)(y).state,l=c.position,i=c.activeItem,s=c.isMarkerHasActive,u=c.appCenter,m=c.filterType,f=c.activeTab,d=o.filter((function(e){return m.includes(e.storeType)})),p=(0,n.useRef)();return(0,n.useEffect)((function(){var e={lat:1e3,lng:1e3};if(i||!s){if(i){var t=null==o?void 0:o.find((function(e){return e.id===i}));e={lat:(null==t?void 0:t.latitude)||1e3,lng:(null==t?void 0:t.longitude)||1e3}}else e=M(u)?u:M(l)?l:d.length?{lat:d[0].latitude||1e3,lng:d[0].longitude||1e3}:{lat:a.capitalLatitude,lng:a.capitalLongitude};M(e)?r(e):r({lat:a.capitalLatitude,lng:a.capitalLongitude})}}),[i,l,o,u,m,s,f]),(0,n.useEffect)((function(){return function(){p.current=f}}),[f]),[t]}(),1),t=e[0],r=P().resultData,o=void 0===r?[]:r,c=(0,n.useContext)(y),l=c.state,i=l.filterType,m=l.activeItem,f=l.position,d=l.appCenter,p=l.isMarkerHasActive,E=c.dispatch,v=(0,_.Sz)(),g=(0,_.oW)(),h=(0,_.aU)(),C=(0,n.useRef)(null),b=(0,u.ag)(),T=(0,n.useMemo)((function(){return M(d)?d:f}),[f,d]),A=(0,n.useMemo)((function(){return o.filter((function(e){return i.includes(e.storeType)}))}),[o,i]),N=(0,n.useCallback)((function(e){E({type:s.UPDATE_ACTIVE_ITEM,payload:e})}),[m]),L=(0,n.useMemo)((function(){return{bootstrapURLKeys:{key:"AIzaSyDVmVFsyaxCUFDsYCZY1SVKzkfuKPHA8ac",language:g.lang,libraries:["places","geometry","drawing","visualization"]},center:t,zoom:m||p?14:"hk"===h?12:7,yesIWantToUseGoogleMapApiInternals:!0,options:function(){return{draggable:!0,gestureHandling:"tablet"===b?"greedy":""}}}}),[t,m,b]),I=function(e,t){var r=document.querySelector(".store-map-index__pc .mi-store-list"),n=document.querySelector(".store-map-index__pc .mi-store-list__container"),a=Array.from(A).findIndex((function(e){return e.id===t}));if(r&&t){var o=n.firstElementChild.offsetTop,c=n.querySelector("li:nth-child(".concat(a+1,")")).offsetTop;r.scrollTo(0,c-o)}},x=function(e){e.target&&["mobile","tablet"].includes(b)&&(q(e.target,".store-marker")||E({type:s.UPDATE_ACTIVE_ITEM,payload:""}))};return(0,n.useEffect)((function(){var e=setTimeout((function(){if(m){(Array.from(document.querySelectorAll(".store-marker"))||[]).forEach((function(e){var t=e.parentElement;t&&(t.style.zIndex="0")}));var e=document.querySelector(".store-marker.active"),t=e&&e.parentElement;t&&(t.style.zIndex="10000")}}),0);return function(){clearTimeout(e)}}),[m,b,A]),(0,n.useEffect)((function(){var e=document.querySelector(".mi-store-map");return e.addEventListener("click",x,!1),function(){e.removeEventListener("click",x,!1)}}),[b]),(0,n.useEffect)((function(){return function(){E({type:s.UPDATE_IS_HAS_ACTIVE,payload:!1})}}),[]),n.createElement("div",{className:a("mi-store-map",{"with-center":M(T)})},!v&&n.createElement(O.ZP,Z({},L,{onGoogleApiLoaded:function(e){var r=e.map;C.current=r,r.panTo(Z({},t))}}),A.map((function(e,t){var r=e.latitude,a=e.longitude,o=e.id;return!!Number(r)&&!!Number(a)&&n.createElement(j,{key:"".concat(t,"-").concat(o),lat:Number(r),lng:Number(a),activeItem:m,setActiveItem:N,storeData:e,handleMakerClick:I})})),n.createElement(W,Z({},T))),M(T)&&n.createElement("div",{className:"center-control",onClick:function(){C.current&&C.current.panTo(Z({},T)),E({type:s.UPDATE_ACTIVE_ITEM,payload:""})},role:"button",tabIndex:0},n.createElement("img",{className:"center-control__icon",src:"//i01.appmifile.com/webfile/globalimg/wheretobuy/location.png",alt:"go center"})))}var Q=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c},J=function(e,t,r,n){var a="",o=t.replace(/[()[\]*+^${}|?]/gi,(function(e){return"\\".concat(e)}));try{a=e.replace(new RegExp(o,"gi"),(function(e){return"<span style='color: ".concat(r,"; font-weight: ").concat(n,";'>").concat(e,"</span>")}))}catch(c){a=e}return a};function $(e){var t=e.suggestShow,r=e.updateSearchWord,o=e.userInput,c=e.hideSuggest,l=e.userRealInput,i=e.setUserInput,s=Q((0,n.useState)(-1),2),m=s[0],f=s[1],d=Q((0,n.useState)(!1),2),p=d[0],E=d[1],v=(0,u.ag)(),y=(0,n.useMemo)((function(){return"mobile"===v}),[v]),g=(0,n.useContext)(B.QF).data,_=g.suggestList,C=void 0===_?[]:_,b=g.keyword,T=(0,n.useMemo)((function(){return!!C.length&&t}),[C,t]),A=function(e){y||("ArrowDown"===e.key&&m<C.length-1&&(E(!1),f(m+1)),"ArrowUp"===e.key&&m>=0&&(E(!1),f(m-1)),"Escape"===e.key&&c&&c())};return(0,n.useEffect)((function(){m>=0&&C.length&&!p?i&&i(C[m].name):i&&i((null==l?void 0:l.current)||"")}),[m]),(0,n.useEffect)((function(){return window.addEventListener("keydown",A,!1),function(){window.removeEventListener("keydown",A,!1)}}),[C,m]),(0,n.useEffect)((function(){return function(){f(-1)}}),[T]),(0,n.useEffect)((function(){if(C.length){var e=(0,h.otExposeWith)({exposeThreshold:0,targetNodeSelector:".store-suggest__item[data-ot-expose]",isInfinite:!1},(function(e){return Object.assign({},e,{isOpenGA:!0})}));return function(){e&&e.disconnect()}}return function(){return null}}),[C]),n.createElement(n.Fragment,null,T&&n.createElement("ul",{className:"store-suggest",onMouseLeave:function(){return f(-1)},role:"menu",tabIndex:0},C.map((function(e,t){var c=e.name;return n.createElement("li",{className:a("store-suggest__item",{active:m===t,"key-select":!p&&m===t}),onMouseEnter:function(){return function(e){E(!0),i&&i((null==l?void 0:l.current)||""),f(e)}(t)},key:c,onClick:function(){return function(e){return r(e)}(c)},"data-ot-expose":JSON.stringify({tip:{c:"xiaomistore_search",d:t+1,e:17770},elementName:"search",extra:{searchWord:b}}),role:"menuitem",tabIndex:0},n.createElement("span",{dangerouslySetInnerHTML:{__html:J(c,y?o:(null==l?void 0:l.current)||"","#191919",500)}}),n.createElement("i",{className:"micon micon-forward"}))}))))}var X=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c};function ee(){var e=X((0,n.useState)(""),2),t=e[0],r=e[1],a=X((0,n.useState)(!1),2),o=a[0],c=a[1],l=(0,u.ag)(),i=(0,n.useRef)(""),m=(0,n.useContext)(B.QF),f=(0,n.useContext)(y),d=f.state.word,p=f.dispatch,E=(0,n.useCallback)((function(){return c(!1)}),[o]),v=(0,n.useCallback)((function(e){p({type:s.UPDATE_SEARCH_WORD,payload:e}),p({type:s.UPDATE_ACTIVE_ITEM,payload:""}),p({type:s.UPDATE_IS_HAS_ACTIVE,payload:!1}),i.current=e,c(!1),m.resetService(),(0,h.otClick)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",extra:{searchWord:e}}),(0,h.otCustom)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",event:"search",searchWord:e})}),[d,o]);return n.createElement("div",{className:"store-search"},n.createElement("div",{className:"store-search-bar"},n.createElement(G,{setSuggestShow:c,word:d,updateSearchWord:v,setUserInput:r,userInput:t,userRealInput:i})),"mobile"!==l&&n.createElement($,{suggestShow:o,updateSearchWord:v,userInput:t,hideSuggest:E,userRealInput:i,setUserInput:r}))}var te=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c};function re(e){var t=e.isSearchActive,r=e.setIsSearchActive,a=(0,u.ag)(),o=(0,_.YB)(),c=(0,n.useContext)(B.QF),l=(0,n.useContext)(y),i=l.state.word,m=l.dispatch,f=te((0,n.useState)(""),2),d=f[0],p=f[1],E=(0,n.useRef)(null),v=(0,z.m)((function(e){return c.getObservable({params:{word:e,from:"mobile",type:2}})}),200);function g(e){p(e),m({type:s.UPDATE_SEARCH_WORD,payload:e}),r(!1),c.resetService(),(0,h.otClick)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",extra:{searchWord:e}}),(0,h.otCustom)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",event:"search",searchWord:e})}var C=function(){var e;p(""),m({type:s.UPDATE_SEARCH_WORD,payload:""}),c.resetService(),null===(e=E.current)||void 0===e||e.focus()},b=function(){return d.length?n.createElement("i",{className:"micon micon-clear",onClick:C,role:"button",tabIndex:0}):null};return(0,n.useEffect)((function(){var e;p(i),t&&(null===(e=E.current)||void 0===e||e.focus())}),[t]),n.createElement(n.Fragment,null,n.createElement(H.I,{onFocus:function(){r(!0),v(d)},fullwidth:!0,placeholder:o.get("d90ec336fd06c0eca448acaa1970e3d2"),prefix:n.createElement("i",{className:"micon micon-search-glass"}),suffix:b(),className:"store-search-input-m",value:i,onChange:function(){return null}}),t&&n.createElement("div",{className:"store-control-m"},n.createElement("div",{className:"store-control-m__bar"},n.createElement(R.q,{symbol:"back",onClick:function(){return r(!1)}}),n.createElement(H.I,{fullwidth:!0,placeholder:o.get("d90ec336fd06c0eca448acaa1970e3d2"),prefix:n.createElement("i",{className:"micon micon-search-glass"}),suffix:b(),className:"store-search-input-m active",onChange:function(e){p(e.target.value),v(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&g(d)},value:d,ref:E})),"mobile"===a&&n.createElement($,{suggestShow:!0,updateSearchWord:g,userInput:d})))}var ne=r(26644),ae=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c};function oe(e){var t=e.location,r=ae((0,n.useState)(!1),2),o=r[0],c=r[1],m=ae((0,n.useState)(!1),2),f=m[0],d=m[1],p=(0,u.ag)(),E=(0,_.Sz)(),v=(0,n.useContext)(l.j),g=(0,n.useContext)(w.n).data.point,C=(0,n.useContext)(y),b=C.dispatch,T=C.state.activeTab,A=v.data.storeTypeInfo,N=(0,n.useCallback)((function(e){e!==T&&b({type:s.UPDATE_ACTIVE_TAB,payload:e})}),[T]);return(0,n.useEffect)((function(){t&&M(g)&&b({type:s.UPDATE_APP_CENTER,payload:g})}),[t,g]),(0,n.useEffect)((function(){var e=document.querySelector(".store-map-index");return"mobile"===p&&document.body.classList.add("mistore"),"mobile"!==p||E||(0,ne.Mu)()||e&&(e.style.height=window.innerHeight-48+"px"),function(){document.body.classList.remove("mistore"),e&&(e.style.height="")}}),[p]),n.createElement("div",{className:a("store-map-index",{"store-map-index--app":(0,ne.Mu)()})},n.createElement(i,null),n.createElement("div",{className:"store-map-index__mobile hide-pc"},n.createElement("div",{className:"store-data-control"},n.createElement("div",{className:"store-search-control"},n.createElement(re,{isSearchActive:o,setIsSearchActive:c}),n.createElement(R.q,{symbol:"filter",onClick:function(){d(!0),(0,h.otClick)({tip:{c:"xiaomistore_type",d:0,e:17769},isOpenGA:!0,elementName:"filter"})}})),n.createElement(x,{isFilterActive:f,setIsFilterActive:d,storeFilterData:A}),n.createElement(S,{updateTab:N})),n.createElement("div",{className:"mi-store-m__main hide-pc"},"list"===T?n.createElement(U,{storeTypeInfo:A}):n.createElement(K,null))),n.createElement("div",{className:"store-map-index__pc hide-m"},n.createElement("div",{className:"store-data-control__pc"},n.createElement(ee,null),n.createElement(x,{storeFilterData:A}),n.createElement(U,{storeTypeInfo:A})),n.createElement("div",{className:"store-main-content"},n.createElement(K,null))))}var ce=r(27930),le=r(50701),ie=function(){return ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ie.apply(this,arguments)};function se(){var e=(0,u.ag)(),t=(0,n.useContext)(y),r=t.state,a=r.word,o=r.position,c=r.wordChangeCount,l=t.dispatch,i=(0,n.useContext)(w.n),m=(0,n.useContext)(D.N),f=(0,ce.W)("location"),d=(0,n.useRef)();return(0,n.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,r=t.latitude,n=t.longitude;l({type:s.UPDATE_POSITION,payload:{lng:n,lat:r}}),window.hasRequestPosition||(0,h.otClick)({tip:{c:"xiaomistore_allowlocation",d:0,e:17769},isOpenGA:!0,elementTitle:"",elementName:"allow"})}))}),[]),(0,n.useEffect)((function(){return function(){var t=M(o)?o:{},r=f?{location:encodeURIComponent(f)}:{},n={};if(M(o)&&(n.lat=o.lat,n.lon=o.lng),a)i.getService({params:ie(ie({search_from:"index",type:3,word:a,page_index:0,page_size:80},t),r)});else{if(0!==c)return;m.getService({params:Object.assign(n,{pageNum:1,pageSize:1e3,from:"mobile"===e?"mobile":"pc",storeType:"1,2,3"})})}}()}),[a,o,c,f]),(0,n.useEffect)((function(){return("mobile"===e&&"tablet"===d.current||"tablet"===e&&"mobile"===d.current)&&(l({type:s.UPDATE_ACTIVE_ITEM,payload:""}),l({type:s.UPDATE_IS_HAS_ACTIVE,payload:!1})),function(){d.current=e}}),[e]),n.createElement(n.Fragment,null,n.createElement(oe,{location:f}))}function ue(){var e=(0,_.oW)();return(0,ce.W)("location")||window.hasRequestPosition||(0,le.rG)(),(0,n.useEffect)((function(){window.hasRequestPosition=!0}),[]),n.createElement(B.Su,{siteConfig:e,isAutoFetch:!1},n.createElement(w.J,{siteConfig:e,isAutoFetch:!1},n.createElement(l.f,{siteConfig:e,isAutoFetch:!1},n.createElement(D.J,{siteConfig:e,isAutoFetch:!1},n.createElement(g,null,n.createElement(se,null))))))}},44006:(e,t,r)=>{r.d(t,{f:()=>s,j:()=>i});var n=r(67294),a=r(16607),o=r(77613),c=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c},l=(0,a.o)(u),i=(0,n.createContext)(l);function s(e){var t=e.siteConfig,r=e.isAutoFetch,a=e.children,s=c((0,n.useState)(l),2),m=s[0],f=s[1];function d(e){var t=e.data,r=e.errmsg,n=e.errno;return{data:u(t||[]),errMsg:String(r),errNo:Number(n)}}var p={url:"".concat(t.goSite,"/v2/authorizedstore/getopxdata"),method:"GET"};return n.createElement(o.h,{context:i,setState:f,defaultValue:l,adapterError:function(e){return d(e)},adapter:d,value:m,siteConfig:t,isAutoFetch:!!r,ajaxConfig:p},a)}function u(e){return void 0===e&&(e={}),{title:e.title||"",serviceInfoList:m(e.serviceInfoList||[]),storeTypeInfo:e.storeTypeInfo||{}}}function m(e){return void 0===e&&(e=[]),Array.from(e||[]).map((function(e){return{info:e.info||"",icon:e.icon||""}}))}}}]);