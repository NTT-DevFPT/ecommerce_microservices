"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2822],{2822:(e,t,a)=>{a.r(t),a.d(t,{ServiceStoreMap:()=>be,default:()=>ge});var r,n=a(67294),c=a(94184),l=a.n(c),o=function(){return o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};!function(e){e.UPDATE_SEARCH_WORD="UPDATE_SEARCH_WORD",e.UPDATE_PRODUCT_TYPE="UPDATE_PRODUCT_TYPE",e.UPDATE_SERVICEWAY="UPDATE_SERVICEWAY",e.UPDATE_POSITION="UPDATE_POSITION",e.UPDATE_ACTIVE_ITEM="UPDATE_ACTIVE_ITEM",e.UPDATE_MAP_CENTER="UPDATE_MAP_CENTER",e.UPDATE_APP_CENTER="UPDATE_APP_CENTER",e.UPDATE_ACTIVE_TAB="UPDATE_ACTIVE_TAB",e.UPDATE_SHOW_STORE_DETAILS="UPDATE_SHOW_STORE_DETAILS",e.UPDATE_SELECTED_STORE_DATA="UPDATE_SELECTED_STORE_DATA",e.UPDATE_IS_SEARCH="UPDATE_IS_SEARCH"}(r||(r={}));var s={word:"",productType:[],serviceway:[],position:{lat:1e3,lng:1e3},mapCenter:{lat:1e3,lng:1e3},wordChangeCount:0,isMarkerHasActive:!1,appCenter:{lat:1e3,lng:1e3},activeTab:"list",showStoreDetails:!1,activeItem:"",selectedStoreData:{id:""},isSearch:!1};function u(e,t){switch(t.type){case r.UPDATE_POSITION:return o(o({},e),{position:t.payload});case r.UPDATE_PRODUCT_TYPE:return o(o({},e),{productType:t.payload});case r.UPDATE_SERVICEWAY:return o(o({},e),{serviceway:t.payload});case r.UPDATE_SHOW_STORE_DETAILS:return o(o({},e),{showStoreDetails:t.payload});case r.UPDATE_SEARCH_WORD:return o(o({},e),{word:t.payload,wordChangeCount:e.wordChangeCount+1});case r.UPDATE_ACTIVE_ITEM:return t.payload?o(o({},e),{activeItem:t.payload,isMarkerHasActive:!0}):o(o({},e),{activeItem:t.payload});case r.UPDATE_MAP_CENTER:return o(o({},e),{mapCenter:t.payload});case r.UPDATE_APP_CENTER:return o(o({},e),{appCenter:t.payload});case r.UPDATE_ACTIVE_TAB:return o(o({},e),{activeTab:t.payload});case r.UPDATE_SELECTED_STORE_DATA:return o(o({},e),{selectedStoreData:t.payload});case r.UPDATE_IS_SEARCH:return o(o({},e),{isSearch:t.payload});default:return e}}var m=(0,n.createContext)({state:s,dispatch:function(e){}});function p(e){var t=i((0,n.useReducer)(u,s),2),a=t[0],r=t[1];return n.createElement(m.Provider,{value:{state:a,dispatch:r}},e.children)}var d=a(1796);function f(e){var t=(0,d.YB)(),a=e.updateTab,r=(0,n.useContext)(m).state.activeTab,l=function(e){a(e)};return n.createElement("div",{className:"toggle-tab"},n.createElement("div",{className:"toggle-tab__container"},n.createElement("span",{className:c("toggle-tab__item",{active:"list"===r}),onClick:function(){return l("list")},role:"button",tabIndex:0},t.get("56ee3495a32081ccb6d2376eab391bfa")),n.createElement("i",{className:"line"}),n.createElement("span",{className:c("toggle-tab__item",{active:"map"===r}),onClick:function(){return l("map")},role:"button",tabIndex:0},t.get("46f3ea056caa3126b91f3f70beea068c"))))}var E=a(56024),v=a(28396),y=a(62711),T=a(7651),_=a(86690);function b(e){return{selectDeviceExplainMap:{1:e.get("0cb154eed4ddf01b24410f85038f831d"),2:e.get("82f90e2f7354ca298a92ab8a01d6c2a3"),3:e.get("4f0528331bb57354f01a4c7910d3c293"),4:e.get("271ddf829afeece44d8732757fba1a66"),5:e.get("1fb10210b1283c77b8b1d4dc6f366d3a")},serviceExplainMap:{1:e.get("9e5ba0da044dc25277520a04c3455ae4"),2:e.get("66b5cae739b56eb4c6aa493488bc66e5"),3:e.get("0fd78048f6e45842321096d6a0199716"),4:e.get("82420a1473bd5c387505652ea10e4a7e")},deviceType:{1:e.get("853ca16bda4f3d303e70e48db81c17c6"),2:e.get("82f90e2f7354ca298a92ab8a01d6c2a3"),3:e.get("47e3170ffb3d6c316975632968933646"),4:e.get("271ddf829afeece44d8732757fba1a66"),5:e.get("146bdebb324a64d327b1dde22a07d0bd")},notScooterDeviceType:{1:e.get("853ca16bda4f3d303e70e48db81c17c6"),3:e.get("47e3170ffb3d6c316975632968933646"),4:e.get("271ddf829afeece44d8732757fba1a66"),5:e.get("146bdebb324a64d327b1dde22a07d0bd")},serviceType:{1:e.get("337f7b9ce9962aa18951e04c730de42a"),2:e.get("b51b39d885c65c7ee70d7693cfb078d9"),3:e.get("be35196b045091061674e6363b18983b"),4:e.get("0818b60b8ede74625324ce638693d18b")},pointDeviceType:{1:"Smartphone",2:"Scooter",3:"Ecosystem",4:"TV",5:"Laptop"},pointServiceType:{1:"Walk-in",2:"On-site",3:"Mail-in",4:"Collection point"}}}var g={1:"nav-phone",2:"nav-outdoor-travel",3:"nav-robot-vacuum",4:"nav-office",5:"nav-laptops"},A={1:"account",2:"maintain",3:"support-mail",4:"home"},h=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},S=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,c=t.length;n<c;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function D(e){var t=(0,n.useContext)(m),a=t.state,c=a.productType,l=a.serviceway,o=t.dispatch,i=(0,d.YB)(),s=b(i),u=s.deviceType,p=s.serviceType,f=s.pointDeviceType,E=s.pointServiceType,D=h((0,n.useState)(c),2),C=D[0],N=D[1],P=h((0,n.useState)(l),2),I=P[0],U=P[1],O=e.closeFilterActive,R=function(e,t){var a=e.target.value;if("device"===t){e.target.checked&&(0,_.otClick)({tip:"16.107.2.0.28648",elementName:"device_type",elementTitle:f[a],pageType:"support_service-centre",isOpenGA:!0});var r=C.includes(a)?C.filter((function(e){return e!==a})):S(S([],h(C),!1),[a],!1);N(r)}else if("service"===t){e.target.checked&&(0,_.otClick)({tip:"16.107.2.0.28648",elementName:"service_type",elementTitle:E[a],pageType:"support_service-centre",isOpenGA:!0});var n=I.includes(a)?I.filter((function(e){return e!==a})):S(S([],h(I),!1),[a],!1);U(n)}};return n.createElement("div",{className:"store-filter store-filter-m"},n.createElement("div",{className:"store-filter__main"},n.createElement("div",{className:"store-filter-type-select"},n.createElement("p",{className:"store-filter-type-select"},i.get("3836c33415a6d95d4a63388a6bcadf3b")),n.createElement(v.Z.Group,{cbType:"card"},Object.entries(u).map((function(e){var t=h(e,2),a=t[0],r=t[1];return n.createElement(v.Z,{value:a,key:"".concat(a,"-").concat(C.includes(a)),showSelectedIcon:!1,checked:C.includes(a),className:"store-filter__radio-item",onChange:function(e){return R(e,"device")}},n.createElement(y.q,{symbol:g[a]}),r)})))),n.createElement("div",{className:"store-filter-type-select"},n.createElement("p",{className:"store-filter-type-select"},i.get("641b9b441f6953a386496e5c649780b0")),n.createElement(v.Z.Group,{cbType:"card"},Object.entries(p).map((function(e){var t=h(e,2),a=t[0],r=t[1];return n.createElement(v.Z,{value:a,key:"".concat(a,"-").concat(I.includes(a)),showSelectedIcon:!1,checked:I.includes(a),className:"store-filter__radio-item",cbType:"card",onChange:function(e){return R(e,"service")}},n.createElement(y.q,{symbol:A[a]}),r)}))))),n.createElement(T.z,{btnType:"primary",className:"store-filter__confirm",onClick:function(){o({type:r.UPDATE_SERVICEWAY,payload:I}),o({type:r.UPDATE_PRODUCT_TYPE,payload:C}),O&&O()}},i.get("70d9be9b139893aa6c69b5e77e614311")))}var C={data:{isNotScooter:[{api:!0,locals:["tw"]}]},html:{},js:{},css:{}},N=a(29674),P=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},I=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,c=t.length;n<c;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function U(){var e=(0,d.YB)(),t=(0,d.aU)(),a=b(e),c=a.serviceType,l=a.deviceType,o=a.pointDeviceType,i=a.pointServiceType,s=a.notScooterDeviceType,u=(0,n.useContext)(m),p=u.state,f=p.productType,E=p.serviceway,T=u.dispatch,h=((0,N.h)(t,C).data||{}).isNotScooter,S=function(e,t){(0,_.otClick)({tip:"16.107.2.0.28648",elementName:"".concat(e,"_type"),elementTitle:"device"===e?o[t]:i[t],pageType:"support_service-centre",isOpenGA:!0})},D=function(e,t){var a=e.target.value;if("device"===t){e.target.checked&&S("device",a);var n=f.includes(a)?f.filter((function(e){return e!==a})):I(I([],P(f),!1),[a],!1);T({type:r.UPDATE_PRODUCT_TYPE,payload:n})}else if("service"===t){e.target.checked&&S("service",a);var c=E.includes(a)?E.filter((function(e){return e!==a})):I(I([],P(E),!1),[a],!1);T({type:r.UPDATE_SERVICEWAY,payload:c})}};return n.createElement("div",{className:"store-filter store-filter-pc"},n.createElement("div",{className:"store-filter-type-select"},n.createElement("p",{className:"store-filter-type-select"},e.get("3836c33415a6d95d4a63388a6bcadf3b")),n.createElement(v.Z.Group,{cbType:"card"},Object.entries(h?s:l).map((function(e){var t=P(e,2),a=t[0],r=t[1];return n.createElement(v.Z,{value:a,key:a,showSelectedIcon:!1,checked:f.includes(a),className:"store-filter__radio-item",onChange:function(e){return D(e,"device")}},n.createElement(y.q,{symbol:g[a]}),r)})))),n.createElement("div",{className:"store-filter-type-select"},n.createElement("p",{className:"store-filter-type-select"},e.get("641b9b441f6953a386496e5c649780b0")),n.createElement(v.Z.Group,{cbType:"card"},Object.entries(c).map((function(e){var t=P(e,2),a=t[0],r=t[1];return n.createElement(v.Z,{value:a,key:a,showSelectedIcon:!1,checked:E.includes(a),className:"store-filter__radio-item",cbType:"card",onChange:function(e){return D(e,"service")}},n.createElement(y.q,{symbol:A[a]}),r)})))))}var O=function(){return O=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},O.apply(this,arguments)};function R(e){return"mobile"!==(0,E.ag)()?n.createElement(U,null):n.createElement(D,O({},e))}var w=a(39784),x=a(30833),k=a(16607),W=a(77613),L=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},M=(0,k.o)(q),H=(0,n.createContext)(M);function V(e){var t=e.children,a=e.siteConfig,r=e.isAutoFetch,c=L((0,n.useState)(M),2),l=c[0],o=c[1];function i(e){var t=e.body,a=e.errmsg,r=e.errno;return{data:q(t||{}),errMsg:String(a),errNo:Number(r)}}var s={url:"".concat(a.apiSite,"/crm/api/XSiteMapQuery"),method:"POST",headers:{"Content-Type":"application/json"}};return n.createElement(W.h,{context:H,setState:o,defaultValue:M,adapterError:function(e){return i(e)},adapter:i,siteConfig:a,value:l,isAutoFetch:!!r,ajaxConfig:s},t)}function q(e){return void 0===e&&(e={}),{page:(null==e?void 0:e.page)&&(a=e.page,{count:Number(a.count)||0,pageNo:Number(a.pageNo)||0,pageSize:Number(a.pageSize)||0})||{pageNo:0,count:0,size:0},orgList:(null==e?void 0:e.orgList)&&(t=e.orgList,t.length?t.map((function(e){return{id:e.id||"",name:e.name||"",productType:e.productType||[],productTypeDesc:e.productTypeDesc&&e.productTypeDesc.length?e.productTypeDesc.join(","):"",serviceWay:e.serviceWay||[],serviceWayDesc:e.serviceWayDesc&&e.serviceWayDesc.length?e.serviceWayDesc.join(","):"",type:e.type||0,typeDesc:e.typeDesc||"",city:e.city||"",address:e.address||"",tel:e.tel||"",shopTime:e.shopTime||"",latitude:Number(e.latitude)||1e3,longitude:Number(e.longitude)||1e3,announcement:e.announcement||""}})):[])||[]};var t,a}var j=a(6658);function Y(){var e=(0,n.useContext)(H).data.orgList;return{resultData:(0,n.useMemo)((function(){return e.length?e:[]}),[e])}}function B(){var e=(0,d.YB)(),t=b(e).serviceType,a=(0,E.ag)(),l=Y().resultData,o=void 0===l?[]:l,i=(0,n.useContext)(m),s=i.state,u=s.activeItem,p=s.wordChangeCount,f=i.dispatch,v=(0,n.useContext)(H),T=(0,n.useContext)(j.N),h=(0,n.useCallback)((function(e){(0,_.otClick)({tip:"16.107.3.0.28649",elementName:"store_details",elementTitle:"map",pageType:"support_service-centre",isOpenGA:!0}),f({type:r.UPDATE_ACTIVE_ITEM,payload:e}),f({type:r.UPDATE_SHOW_STORE_DETAILS,payload:!1}),f({type:r.UPDATE_SELECTED_STORE_DATA,payload:{}}),"mobile"===a&&f({type:r.UPDATE_ACTIVE_TAB,payload:"map"})}),[u,f]);return n.createElement("div",{className:"mi-service-list",id:"mi-service-list-dom"},"success"===v.ajaxStatus||0===p&&T.getServiceSuccess?n.createElement(n.Fragment,null,0===o.length?n.createElement("div",{className:"mi-service-list-empty"},n.createElement(y.q,{symbol:"warning"}),n.createElement("p",{className:"mi-service-list-empty__content"},e.get("f3f579bf85750f6fd39f922756cd4552")),n.createElement("p",{className:"mi-service-list-empty__content"},e.get("f549f3476aa834a5f8e9aa70cbf08cb5"))):n.createElement("ul",{className:"mi-service-list__container",role:"menu",tabIndex:0},o.map((function(l,o){var i=l.id,s=l.name,m=l.address,p=l.productType,d=l.serviceWay,E=l.tel,v=l.shopTime;return n.createElement("li",{className:c("mi-service-list__item",{active:i===u}),id:"mi-service-list-dom-".concat(o),key:"".concat(o,"-").concat(i),role:"menuitem",tabIndex:0,onClick:function(){return h(i)}},n.createElement("h3",{className:"mi-service-list__item-title"},s),n.createElement("div",{className:"mi-service-list__item-tag"},null==d?void 0:d.map((function(e){return n.createElement(w.V,{key:e,color:"orange"},n.createElement(y.q,{symbol:A[e]}),t[e])}))),m&&n.createElement("p",{className:"mi-service-list__item-location"},n.createElement(y.q,{symbol:"location"}),n.createElement("span",null,m)),v&&n.createElement("p",{className:"mi-service-list__item-time"},n.createElement(y.q,{symbol:"time"}),n.createElement("span",null,v)),E&&n.createElement("p",{className:"mi-service-list__item-tel"},n.createElement(y.q,{symbol:"phone"}),n.createElement("span",null,E)),0!==(null==p?void 0:p.length)&&n.createElement("p",{className:"mi-service-list__item-productType"},n.createElement(y.q,{symbol:"nav-tool"}),n.createElement("span",null,null==p?void 0:p.map((function(e){return n.createElement(y.q,{key:e,symbol:g[e]})})))),n.createElement("p",{className:"mi-service-list__item-link",onClick:function(e){return function(e,t,n){e.stopPropagation(),(0,_.otClick)({tip:"16.107.3.0.28649",elementName:"store_details",elementTitle:"learn_more",pageType:"support_service-centre",isOpenGA:!0}),f({type:r.UPDATE_ACTIVE_ITEM,payload:n}),f({type:r.UPDATE_SHOW_STORE_DETAILS,payload:!0}),f({type:r.UPDATE_SELECTED_STORE_DATA,payload:t}),"mobile"===a&&f({type:r.UPDATE_ACTIVE_TAB,payload:"map"})}(e,l,i)},role:"button"},e.get("f5395c9793af8a11b406ca7c1ac70da9")," ",n.createElement(y.q,{symbol:"micon-link-arrow"})))})))):n.createElement(x.a,{extClassNames:"mi-service-list__loader"}))}var G=a(98986),F=function(e){var t=e||{lat:1e3,lng:1e3},a=t.lat,r=t.lng;return 1e3!==a&&1e3!==r},z=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};var Z=a(78816);function K(e){var t=e.storeData,a=e.highlightId,c=(0,n.useContext)(m).dispatch;return n.createElement("div",{className:"store-marker"},n.createElement("div",{className:"store-marker__sign",onClick:function(e){!function(e){e.stopPropagation(),c({type:r.UPDATE_SELECTED_STORE_DATA,payload:t}),c({type:r.UPDATE_SHOW_STORE_DETAILS,payload:!0}),c({type:r.UPDATE_ACTIVE_ITEM,payload:t.id});var n=document.getElementById("mi-service-list-dom-".concat(a)),l=document.getElementById("mi-service-list-dom");l&&n&&(l.scrollTop=n.offsetTop-l.offsetTop)}(e)},role:"button",tabIndex:0},n.createElement(Z.b,null)))}function Q(e){var t=e.storeData,a=(0,d.YB)(),c=b(a),l=c.serviceType,o=c.selectDeviceExplainMap,i=c.serviceExplainMap,s=(0,n.useContext)(m).dispatch,u=t.productType,p=t.address,f=t.tel,E=t.serviceWay,v=t.shopTime,T=t.announcement,_=t.name;return n.createElement("div",{className:"store-details"},n.createElement(y.q,{symbol:"clear",className:"store-details-close",onClick:function(){s({type:r.UPDATE_SELECTED_STORE_DATA,payload:{id:""}}),s({type:r.UPDATE_SHOW_STORE_DETAILS,payload:!1})},role:"button",tabIndex:0}),n.createElement("h2",{className:"store-details-name"},_),n.createElement("div",{className:"store-details-service"},T&&n.createElement("div",{className:"store-details-service-annoucement"},n.createElement("p",{className:"store-details-service-title"},a.get("40fa3bc5389e8f2b7e1b144024cbc92b")),n.createElement("p",{className:"store-details-service-annoucement-content"},T)),n.createElement("div",{className:"store-details-service-info"},n.createElement("p",{className:"store-details-service-title"},a.get("807402b2447c57bd90060f83ba51c561")),p&&n.createElement("p",{className:"store-details-service-info-location"},n.createElement(y.q,{symbol:"location"}),n.createElement("span",null,p)),v&&n.createElement("p",{className:"store-details-service-info-time"},n.createElement(y.q,{symbol:"time"}),n.createElement("span",null,v)),f&&n.createElement("p",{className:"store-details-service-info-tel"},n.createElement(y.q,{symbol:"phone"}),n.createElement("span",null,f))),0!==(null==u?void 0:u.length)&&n.createElement("div",{className:"store-details-service-product"},n.createElement("p",{className:"store-details-service-title"},a.get("8e2d4d500540c50d95091b34556210a6")),null==u?void 0:u.map((function(e){return n.createElement("p",{key:e,className:"store-details-service-product__list-content"},n.createElement(y.q,{symbol:g[e]}),n.createElement("span",null,o[e]))}))),0!==(null==E?void 0:E.length)&&n.createElement("div",{className:"store-details-service-way"},n.createElement("p",{className:"store-details-service-title"},a.get("641b9b441f6953a386496e5c649780b0")),null==E?void 0:E.map((function(e){return n.createElement(n.Fragment,{key:e},n.createElement(w.V,{color:"orange",className:"store-details-service-way-tag"},n.createElement(y.q,{symbol:A[e]}),l[e]),n.createElement("p",null,i[e]))})))))}var X={data:{notShowMap:[{api:!0,locals:["tw"]}]},html:{},js:{},css:{}},J=function(){return J=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},J.apply(this,arguments)},$=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};function ee(){var e,t=$(function(){var e=z((0,n.useState)({lat:1e3,lng:1e3}),2),t=e[0],a=e[1],r=(0,d.oW)(),c=Y().resultData,l=(0,n.useContext)(m).state,o=l.position,i=l.activeItem,s=l.isMarkerHasActive,u=l.appCenter,p=l.serviceway,f=l.productType,E=l.activeTab,v=(0,n.useRef)();return(0,n.useEffect)((function(){var e={lat:1e3,lng:1e3};if(i||!s){if(i){var t=null==c?void 0:c.find((function(e){return e.id===i}));e={lat:(null==t?void 0:t.latitude)||1e3,lng:(null==t?void 0:t.longitude)||1e3}}else e=F(u)?u:F(o)?o:c.length?{lat:c[0].latitude||1e3,lng:c[0].longitude||1e3}:{lat:r.capitalLatitude,lng:r.capitalLongitude};F(e)?a(e):a({lat:r.capitalLatitude,lng:r.capitalLongitude})}}),[i,o,c,u,f,p,s,E]),(0,n.useEffect)((function(){return function(){v.current=E}}),[E]),[t]}(),1),a=t[0],l=Y().resultData,o=void 0===l?[]:l,i=(0,n.useContext)(m),s=i.state,u=s.activeItem,p=s.position,f=s.appCenter,v=s.selectedStoreData,y=s.showStoreDetails,T=s.isMarkerHasActive,_=i.dispatch,b=(0,d.Sz)(),g=(0,d.oW)(),A=(0,d.aU)(),h=(0,N.h)(A,X),S=(null===(e=null==h?void 0:h.data)||void 0===e?void 0:e.notShowMap)||!1,D=(0,n.useRef)(null),C=(0,E.ag)(),P=(0,n.useMemo)((function(){return F(f)?f:p}),[p,f]),I=(0,n.useMemo)((function(){return{bootstrapURLKeys:{key:"AIzaSyDVmVFsyaxCUFDsYCZY1SVKzkfuKPHA8ac",language:g.lang,libraries:["places","geometry","drawing","visualization"]},center:a,zoom:u||T?14:"hk"===A?12:7,yesIWantToUseGoogleMapApiInternals:!0,options:function(){return{draggable:!0,gestureHandling:"tablet"===C?"greedy":""}}}}),[a,u,C]);return n.createElement("div",{className:c("mi-store-map",{"with-center":F(P)})},S&&n.createElement("div",{className:"not-show-map-tip"},n.createElement("span",null,"請點擊左側網點瞭解更多")),!b&&!S&&n.createElement(G.ZP,J({},I,{onGoogleApiLoaded:function(e){var t=e.map;D.current=t,t.panTo(J({},a))}}),o.map((function(e,t){var a=e.latitude,r=e.longitude,c=e.id;return!!Number(a)&&!!Number(r)&&n.createElement(K,{storeListNum:o.length,key:"".concat(t,"-").concat(c),highlightId:t,lat:Number(a),lng:Number(r),storeData:e})}))),F(P)&&!S&&n.createElement("div",{className:"center-control",onClick:function(){D.current&&D.current.panTo(J({},P)),_({type:r.UPDATE_ACTIVE_ITEM,payload:""})},role:"button",tabIndex:0},n.createElement("img",{className:"center-control__icon",src:"//i01.appmifile.com/webfile/globalimg/wheretobuy/location.png",alt:"go center"})),y&&n.createElement(Q,{storeData:v}))}var te=a(53573),ae=a(41959);function re(e){var t=e.word,a=e.updateSearchWord,c=e.userInput,l=e.setUserInput,o=e.userRealInput,i=(0,n.useContext)(m).dispatch,s=(0,d.YB)(),u=(0,n.useRef)(null),p=(0,ae.N)((function(e){e.trim()&&i({type:r.UPDATE_IS_SEARCH,payload:!0}),i({type:r.UPDATE_SEARCH_WORD,payload:e.trim()})}),500,[t]),f=function(){var e;l(""),a(""),null===(e=u.current)||void 0===e||e.focus()};(0,n.useEffect)((function(){return l(t)}),[t]);return n.createElement(te.I,{ref:u,fullwidth:!0,placeholder:s.get("e9f125a37da23ffce0813eff03f37537"),value:c,onChange:function(e){var t=e.target.value;o.current=t,l(t),p(t)},onKeyPress:function(e){var t;"Enter"===e.key&&(a(c),null===(t=u.current)||void 0===t||t.blur())},prefix:n.createElement("i",{className:"micon micon-search-glass"}),suffix:(null==c?void 0:c.length)?n.createElement("i",{className:"micon micon-clear",onClick:f,role:"button",tabIndex:0}):null,className:"store-search-input"})}var ne=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};function ce(){var e=ne((0,n.useState)(""),2),t=e[0],a=e[1],c=(0,n.useRef)(""),l=(0,n.useContext)(m),o=l.state.word,i=l.dispatch,s=(0,n.useCallback)((function(e){i({type:r.UPDATE_SEARCH_WORD,payload:e.trim()}),i({type:r.UPDATE_ACTIVE_ITEM,payload:""}),i({type:r.UPDATE_SHOW_STORE_DETAILS,payload:!1})}),[o]);return n.createElement("div",{className:"store-search"},n.createElement("div",{className:"store-search-bar"},n.createElement(re,{updateSearchWord:s,setUserInput:a,word:o,userInput:t,userRealInput:c})))}var le=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};function oe(){var e=(0,d.YB)(),t=(0,n.useContext)(m),a=t.state.word,c=t.dispatch,l=le((0,n.useState)(""),2),o=l[0],i=l[1],s=(0,n.useRef)(null),u=(0,ae.N)((function(e){e.trim()&&c({type:r.UPDATE_IS_SEARCH,payload:!0}),c({type:r.UPDATE_SEARCH_WORD,payload:e.trim()})}),500,[a]);var p=function(){var e;i(""),c({type:r.UPDATE_SEARCH_WORD,payload:""}),null===(e=s.current)||void 0===e||e.focus()};return(0,n.useEffect)((function(){i(a)}),[]),n.createElement("div",null,n.createElement(te.I,{fullwidth:!0,placeholder:e.get("e9f125a37da23ffce0813eff03f37537"),prefix:n.createElement("i",{className:"micon micon-search-glass"}),suffix:(null==o?void 0:o.length)?n.createElement("i",{className:"micon micon-clear",onClick:p,role:"button",tabIndex:0}):null,className:"store-search-input-m active",onChange:function(e){var t=e.target.value;i(t),u(t)},onKeyPress:function(e){"Enter"===e.key&&function(e){i(e),c({type:r.UPDATE_SEARCH_WORD,payload:e.trim()})}(o)},value:o,ref:s}))}var ie=a(44006),se=a(81071),ue=a(26644),me=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,c=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)l.push(r.value)}catch(o){n={error:o}}finally{try{r&&!r.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l};function pe(e){var t=e.location,a=me((0,n.useState)(!1),2),o=a[0],i=a[1],s=(0,E.ag)(),u=(0,d.Sz)(),p=(0,n.useContext)(ie.j),v=(0,n.useContext)(se.n).data.point,T=(0,n.useContext)(m),_=T.dispatch,b=T.state,g=b.activeTab,A=b.showStoreDetails,h=(0,n.useCallback)((function(e){e!==g&&_({type:r.UPDATE_ACTIVE_TAB,payload:e})}),[g,_]);return(0,n.useEffect)((function(){return p.getService(),function(){p.resetService()}}),[]),(0,n.useEffect)((function(){t&&F(v)&&_({type:r.UPDATE_APP_CENTER,payload:v})}),[t,v]),(0,n.useEffect)((function(){var e=document.querySelector(".service-map-index");return"mobile"===s&&document.body.classList.add("mistore"),"mobile"!==s||u||(0,ue.Mu)()||e&&(e.style.height=window.innerHeight-48+"px"),function(){document.body.classList.remove("mistore"),e&&(e.style.height="")}}),[s]),n.createElement("div",{className:c("service-map-index",{"service-map-index--app":(0,ue.Mu)()})},(0,ue.Mu)()||"mobile"===s?n.createElement("div",{className:"service-map-index__mobile"},!A&&n.createElement("div",{className:l()({"service-data-control":!0,"service-control-fill":!!o,"service-control--in-app":(0,ue.Mu)()})},n.createElement("div",{className:"service-search-control"},n.createElement(oe,null),n.createElement(y.q,{symbol:"filter",onClick:function(){i(!0)}})),!o&&n.createElement(f,{updateTab:h}),o&&n.createElement(R,{closeFilterActive:function(){return i(!1)}})),!o&&n.createElement("div",{className:"mi-service-m__main hide-pc"},"list"===g?n.createElement(B,null):n.createElement(ee,null))):n.createElement("div",{className:"service-map-index__pc"},n.createElement("div",{className:"service-data-control__pc"},n.createElement(ce,null),n.createElement(R,null),n.createElement(B,null)),n.createElement("div",{className:"service-main-content"},n.createElement(ee,null))))}var de=a(85785),fe=a(27930),Ee=a(50701),ve=a(42296),ye=function(){return ye=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},ye.apply(this,arguments)};function Te(){var e=(0,E.ag)(),t=(0,d.aU)(),a=(0,n.useContext)(m),c=a.state,l=c.word,o=c.position,i=c.productType,s=c.serviceway,u=c.isSearch,p=a.dispatch,f=(0,n.useContext)(H),v=(0,fe.W)("location"),y=(0,n.useRef)();return(0,n.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;p({type:r.UPDATE_POSITION,payload:{lng:n,lat:a}})}))}),[]),(0,n.useEffect)((function(){var e,a;p({type:r.UPDATE_ACTIVE_ITEM,payload:""}),p({type:r.UPDATE_SELECTED_STORE_DATA,payload:{}}),p({type:r.UPDATE_SHOW_STORE_DETAILS,payload:!1}),e=v?{location:encodeURIComponent(v)}:{},a={},F(o)&&(a.latitude=o.lat,a.longitude=o.lng),f.getService({params:ye(ye({city:l||void 0,country:"uk"===t?"gb":t,languageId:(0,ve.B)(t),pageNo:1,pageSize:1e3,serviceway:s,productType:i,orgType:[]},e),a)},(function(e){u&&(0,_.otClick)({tip:"16.107.1.0.28647",elementName:"mapsearch",elementTitle:e.data.orgList.length>0?"success":"fail",searchWord:l,pageType:"support_service-centre",isOpenGA:!0}),p({type:r.UPDATE_IS_SEARCH,payload:!1})}))}),[l,o,i,s,v]),(0,n.useEffect)((function(){return("mobile"===e&&"tablet"===y.current||"tablet"===e&&"mobile"===y.current)&&p({type:r.UPDATE_ACTIVE_ITEM,payload:""}),function(){y.current=e}}),[e]),n.createElement(n.Fragment,null,n.createElement(pe,{location:v}))}function _e(){var e=(0,d.oW)();return(0,fe.W)("location")||window.hasRequestPosition||(0,Ee.rG)(),(0,n.useEffect)((function(){window.hasRequestPosition=!0}),[]),n.createElement(de.Su,{siteConfig:e,isAutoFetch:!1},n.createElement(ie.f,{siteConfig:e,isAutoFetch:!1},n.createElement(V,{siteConfig:e,isAutoFetch:!1},n.createElement(p,null,n.createElement(Te,null)))))}function be(){return n.createElement(_e,null)}const ge=be}}]);