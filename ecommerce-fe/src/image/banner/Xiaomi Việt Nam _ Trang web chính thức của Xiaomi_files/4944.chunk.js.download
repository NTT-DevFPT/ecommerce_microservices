"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4944],{47036:(n,t,r)=>{r.d(t,{$:()=>E});var e=r(67294),a=r(94184),i=r(22886),c=r(55709),u=r(41931),o=r(43825),l=r(13251),f=r(30776),s=r(63438),m=r(30130),p=r(582),d=r(66008),v=r(52241),_=r(38733),b=r(64342),g=function(){return g=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n},g.apply(this,arguments)},N=function(n,t){var r="function"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,a,i=r.call(n),c=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)c.push(e.value)}catch(u){a={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return c},y=function(n,t,r){if(r||2===arguments.length)for(var e,a=0,i=t.length;a<i;a++)!e&&a in t||(e||(e=Array.prototype.slice.call(t,0,a)),e[a]=t[a]);return n.concat(e||Array.prototype.slice.call(t))};function j(n){var t,r=n.skuMap,i=n.skuList,u=n.skuData,o=n.portalClassName,l=n.titleClassName,f=n.extendClassName,s=n.baseClassName,m=(0,v.m)((function(n,t){return t.pipe((0,c.U)((function(n){var t=N(n,3),r=t[0],e=t[1],a=t[2];return!!r.length&&!!e.length&&!!a.length})))}),!1,[i,r,u]),p=N((0,e.useState)([{list:Array(3).fill(1)},{list:Array(2).fill(1)}]),1)[0];return m?e.createElement(h,g({},n)):e.createElement("section",{className:a((t={},t["".concat(o)]=!!o,t["".concat(s," ").concat(s,"--loading")]=!!s,t["".concat(f," ").concat(f,"--loading")]=!!f,t))},p.map((function(n,t){var r,i;return e.createElement(e.Fragment,{key:t},e.createElement("h3",{className:a((r={},r["".concat(s,"__title ").concat(s,"__title--loading")]=!!s,r["".concat(f,"__title ").concat(f,"__title--loading")]=!!f,r["".concat(l," ").concat(l,"--loading")]=!!l,r))},"Â "),e.createElement("ul",{className:a((i={},i["".concat(s,"__list")]=!!s,i["".concat(f,"__list")]=!!f,i))},n.list.map((function(n,t){var r,i;return e.createElement("li",{className:a((r={},r["".concat(s,"__item")]=!!s,r["".concat(f,"__item")]=!!f,r)),key:t},e.createElement("button",{className:a((i={},i["".concat(s,"__button")]=!!s,i["".concat(f,"__button")]=!!f,i))}))}))))})))}function h(n){var t,r=n.skuMap,g=n.skuList,j=n.skuData,h=n.currentGoodsId,E=n.bigTapDisabledIds,O=n.setGoodsId,A=n.resetGoodsId,k=n.skuClickBury,D=n.portalClassName,S=n.titleClassName,C=n.extendClassName,M=n.baseClassName,U=n.forwardedRef,w=[M,C||""].filter((function(n){return!!n})),I=N((0,e.useState)(h||0),1)[0],x=N((0,e.useState)(""),2),L=x[0],F=x[1],B=N((0,e.useState)(!1),2),G=B[0],R=B[1],H=N((0,e.useState)(Array(g.length).fill(-1)),2),K=H[0],P=H[1];function V(n,t,r){var e=Array.from(n);return e[t]=r,e}var $=(0,e.useMemo)((function(){var n=g.map((function(n){return n&&n.list?n.list.map((function(n){return n.name})):[]})).map((function(n){return n.map((function(n,t){return t}))}));return n.map((function(n){return n.map((function(n){return[n]}))})).reduce((function(n,t){return n.reduce((function(n,r){return n.concat(t.map((function(n){return r.concat(n)})))}),[])}),[[]]).map((function(n){var t=r.filter((function(t){var r=N(t,2),e=r[0];r[1];return e===n.join(",")})).map((function(n){var t=N(n,2);t[0];return t[1].goodsId})).map((function(n){var t=N(n,1)[0];return Number(t||0)}));return[n.join(","),t]}))}),[g,r]),T=(0,v.m)((function(n,t){return t.pipe((0,c.U)((function(n){var t=N(n,2),r=t[0],e=t[1];return r.map((function(n){var t=N(n,2);return[t[0],t[1].map((function(n){var t=e.find((function(t){return t.itemId===n}));return Object.assign({},t)}))]}))})))}),[],[$,j]),q=(0,e.useMemo)((function(){return g.map((function(n){return(null==n?void 0:n.list)||[]})).map((function(n,t){return n.map((function(n,r){return{className:w.map((function(n){return"".concat(n,"__button")})).join(" "),itemPosition:[t,r],isDisabled:!1,isVisible:!0}}))}))}),[g]),z=(0,v.m)((function(n,t){return t.pipe((0,u.x)((function(n,t){var r=N(n,2),e=r[0],a=r[1],i=N(t,2),c=i[0],u=i[1];return e.join(",")===c.join(",")&&a===u})),(0,o.M)(n),(0,c.U)((function(n){var t=N(n,2),r=N(t[0],3),e=r[0],a=r[1],i=r[2],c=t[1];return e.map((function(n,t,r){return[[t,n],r,a,i,c[t]]}))})),(0,l.b)((function(n){return i.of.apply(void 0,y([],N(n),!1)).pipe((0,c.U)((function(n,t){var r=N(n,5),e=N(r[0],2),a=(e[0],e[1],r[1]),i=r[2],c=r[3];return r[4].map((function(n,r){return[[t,r],a,i,c,n]}))})),(0,l.b)((function(n){return i.of.apply(void 0,y([],N(n),!1)).pipe((0,c.U)((function(n){var t=N(n,5),r=N(t[0],2),e=r[0],a=r[1],i=t[1],c=t[2],u=t[3],o=t[4],l=w.map((function(n){return"".concat(n,"__button--active")})).join(" "),f=(w.map((function(n){return"".concat(n,"__button--hidden")})).join(" "),w.map((function(n){return"".concat(n,"__button--disabled")})).join(" ")),s=w.map((function(n){return"".concat(n,"__button--sold-out")})).join(" "),m=w.map((function(n){return"".concat(n,"__button--not-sku")})).join(" "),p=Array.from(i);p[e]=a;var d=c.filter((function(n){var t=N(n,2),r=t[0];t[1];return r===p.join(",")})).map((function(n){var t=N(n,2);t[0];return t[1]})),v=0===c.filter((function(n){var t=N(n,2),r=t[0];t[1];return r.split(",").map((function(n){return Number(n)}))[e]===a})).flatMap((function(n){var t=N(n,2);t[0];return t[1]})).length,b=new Set(o.className?o.className.split(" "):[]);i[e]===a?b.add(l):b.delete(l);var g=Object.assign({},o,{className:Array.from(b).join(" ")}),y=p.slice(0,e+1),j=c.map((function(n){var t=N(n,2),r=t[0],e=t[1];return[r.split(",").map((function(n){return Number(n)})),e]}));j.filter((function(n){var t=N(n,2),r=t[0];t[1];return y.map((function(n,t){return r[t]===n})).every((function(n){return!0===n}))})).flatMap((function(n){var t=N(n,2);t[0];return t[1]}));if(!d.length)return[g];if(v)return b.add(f),[g=Object.assign({},g,{className:Array.from(b).join(" "),isDisabled:!0})];b.delete(f),g=Object.assign({},g,{className:Array.from(b).join(" "),isDisabled:!1});var h=N(d,1)[0];h.every((function(n){return!n}))?(b.add(m),g=Object.assign({},g,{className:Array.from(b).join(" ")})):(b.delete(m),h.every((function(n){return u.includes(n.itemId)||(0,_.O)(n)}))?(b.add(s),g=Object.assign({},g,{className:Array.from(b).join(" "),isDisabled:!1})):(b.delete(s),g=Object.assign({},g,{className:Array.from(b).join(" "),isDisabled:!1})));return[g]})),(0,f.c)())})),(0,c.U)((function(n){return[n]})),(0,f.c)())})))}),q,[K,T,E||[]]),J=N((0,b.$)((function(n,t,r){return n.pipe((0,u.x)((function(n,t){var r=N(n,2),e=(r[0],r[1]),a=N(t,2),i=(a[0],a[1]);return e.join(",")===i.join(",")})),(0,s.b)((function(n){var t=N(n,2),r=t[0];t[1];r&&(R(!0),k&&"function"==typeof k&&k(r))})),(0,c.U)((function(n){var t=N(n,2);t[0];return t[1]})),(0,m.a)(r),(0,o.M)(t),(0,s.b)((function(n){var t=N(n,2),r=N(t[0],2),e=N(r[0],4),a=e[0],i=e[1];e[2],e[3],r[1],N(t[1],1)[0];return P((function(n){return V(n,a,i)}))})),(0,c.U)((function(n){var t=N(n,2),r=N(t[0],2),e=N(r[0],4),a=e[0],i=e[1],c=e[2],u=e[3],o=N(r[1],1)[0],l=V(N(t[1],1)[0],a,i),f=o.filter((function(n){var t=N(n,2),r=t[0];t[1];return r===l.join(",")})).map((function(n){var t=N(n,2);t[0];return N(t[1],1)[0]})).find((function(n){return!!n}))||0;return f?O(f,u):c?A():F([+u,a,i,Date.now()].join(",")),[l]})))}),[K],[$]),1),Q=J[0];return(0,v.m)((function(n,t){return t.pipe((0,p.n)((function(n){var t=N(n,3),r=t[0];t[1],t[2];return!r.length})),(0,o.M)(n),(0,u.x)(),(0,d.h)((function(n){var t=N(n,2),r=N(t[0],3),e=(r[0],r[1],r[2]);t[1];return!e})),(0,c.U)((function(n){var t=N(n,2),r=N(t[0],3),e=r[0],a=r[1],i=(r[2],t[1]);if(a){var c=N(e.filter((function(n){var t=N(n,2),r=(t[0],N(t[1],1)[0]);return r&&r.itemId===a})),1);return N(c[0],1)[0]}var u=N(e.filter((function(n){var t=N(n,2),r=(t[0],N(t[1],1)[0]);return r&&!1===(0,_.O)(r)})),1),o=u[0],l=N(e.filter((function(n){var t=N(n,2),r=(t[0],N(t[1],1)[0]);return r&&!1!==(0,_.O)(r)&&!r.isNotForSale})),1),f=l[0],s=N(e.filter((function(n){var t=N(n,2),r=(t[0],N(t[1],1)[0]);return r&&!1!==(0,_.O)(r)&&!!r.isNotForSale})),1),m=s[0];return N(o||f||m||[i.join(",")],1)[0]})),(0,u.x)(),(0,c.U)((function(n){return n.split(",").map((function(n){return Number(n)}))})),(0,s.b)((function(n){return n.map((function(n,t){return Q(["",[t,n,!0,!1]])}))})))}),K,[T,I,G]),(0,e.useEffect)((function(){if(""!==L){var n=N(L.split(",").map((function(n){return Number(n)})),3),t=n[0],r=n[1],e=n[2],a=T.filter((function(n){var t=N(n,2);t[0];return!!t[1].length})).map((function(n){var t=N(n,2),r=t[0],e=t[1];return[r.split(",").map((function(n){return Number(n)})),e]})),i=a.filter((function(n){var t=N(n,2),a=t[0];t[1];return a[r]===e})),c=i.map((function(n){var t=N(n,2),r=t[0],e=t[1];return{weight:r.map((function(n,t){return K[t]===n?1:0})).reduce((function(n,t){return n+t}),0),goods:e}})),u=Math.max.apply(Math,y([],N(c.map((function(n){return n.weight}))),!1)),o=c.filter((function(n){return n.weight===u})).flatMap((function(n){return n.goods})),l=o.find((function(n){return n&&!1===(0,_.O)(n)})),f=o.find((function(n){return n&&!1!==(0,_.O)(n)})),s=l||f,m=s&&s.itemId||0,p=N(a.find((function(n){var t=N(n,2),r=(t[0],N(t[1],1)[0]);return r&&r.itemId===m}))||[[],[]],1);p[0].forEach((function(n,r){return Q(["",[r,n,!0,1===t]])}))}}),[L]),e.createElement("section",{className:a((t={},t["".concat(D)]=!!D,t["".concat(M)]=!!M,t["".concat(C)]=!!C,t)),ref:U},j.length&&g.length?g.map((function(n,t){var r,i;return e.createElement(e.Fragment,{key:n.key},e.createElement("h4",{className:a((r={},r["".concat(M,"__title")]=!!M,r["".concat(C,"__title")]=!!C,r["".concat(S)]=!!S,r))},n.title),e.createElement("ul",{className:a((i={},i["".concat(M,"__list")]=!!M,i["".concat(C,"__list")]=!!C,i))},n.list.map((function(n,r){var i;return z[t][r].isVisible,e.createElement("li",{key:"".concat(t,"-").concat(r,"-").concat(n.name),className:a((i={},i["".concat(M,"__icon-item")]=!!M&&n.rgb,i["".concat(M,"__item")]=!!M&&!n.rgb,i["".concat(C,"__icon-item")]=!!C&&n.rgb,i["".concat(C,"__item")]=!!C&&!n.rgb,i))},e.createElement("button",{disabled:z[t][r].isDisabled,className:z[t][r].className,onClick:function(){return Q([n.name,[t,r,!1,!0]])},"aria-label":n.name},n.rgb&&e.createElement("i",{className:"".concat(M,"__color-dot"),style:{backgroundColor:"".concat(n.rgb)}}),e.createElement("span",null,n.name)))}))))})):e.createElement(e.Fragment,null))}var E=e.forwardRef((function(n,t){return e.createElement(j,g({},n,{forwardedRef:t}))}))},38733:(n,t,r)=>{function e(n){return!n||(n.isNotForSale||n.isOutOfStock||!n.isSale)}r.d(t,{O:()=>e})}}]);